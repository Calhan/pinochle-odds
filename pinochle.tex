 \documentclass[11pt]{article}
\usepackage[utf8]{inputenc}
\usepackage{amsmath,amsthm,amssymb,gensymb,graphicx,float,geometry,wrapfig,mathrsfs, dsfont, tikz}
\usepackage{setspace}
\usepackage{graphicx}
\usepackage{listings}
\graphicspath{ {CardioidImages/} }
\doublespacing
\setlength{\parindent}{1cm}
\geometry{letterpaper,margin=1in}
%% \allowdisplaybreaks

\title{Domain and Range}
\author{Calhan Ring and Jason Taylor}
\date{June 7, 2016}

\begin{document}

\begin{center}
  \textbf{Should I Bid?}\\
  \textit{The chances your partner has what you want!}
\end{center}

When bidding in pinochle, the question frequently arises: What are the chances my partner has what I'm looking for? Let's consider a few common scenarios. (Note: This document assumes Livengood scoring rules.)

\begin{center}
  Bidding For Meld\\
\end{center}

\indent 1. You need one card to complete a double marriage. Let's say you have $ K\heartsuit K \heartsuit Q \heartsuit $ three legs of a double marriage, and you are relying on your partner's pass. Intuition likely tells you there is a 1 in 3 chance of your partner having the missing $ Q\heartsuit$, and you would be correct. There are a variety of ways to consider this, but let's not dwell on it. \\
\indent 2. You need one card to complete a run. Let's say you have $A10KQ\spadesuit $ and you need the missing $J\spadesuit$ to complete your run. Since this is a pinochle deck, you know there are two $J\heartsuit$ out there. Intuition initially may tell you there is a 2 in 3 chance your partner has the jack you need. Your intuition is wrong! Here is how we can calculate the odds.\\
\indent There are three possibilities: You're partner has zero, one, or two  $ J \spadesuit$. Let's calculate the odds your partner does \underline{not} have the jack. In order for this to occur, your partner would pick up 12 non $ J\spadesuit$ in a row. The odds the first card would not be a $ J\spadesuit$ , would be $ \frac{34}{36} $. The 36 represents all the cards not in your hand, and the 34 represents all the cards that aren't $J\spadesuit$. The odds the second card picked up would be $\frac{33}{35}$, again with the 35 representing the cards that aren't in your hand, or the first card your partner drew, and 33, the number of non $J\spadesuit$. The likelihood of these two events happening one after the other is $\frac{34}{36}\cdot \frac{33}{35}$. Carrying this logic forward, we consider 12 consecutive events by calculating $\frac{34}{36}\cdot \frac{33}{35}\cdot \frac{32}{34}\cdot ... \cdot\frac{22}{24}$. The calculation for the likelihood our partner has the card we are looking for follows:
\begin{equation}
1-\frac{\frac{34!}{22!}}{\frac{36!}{24!}}=1-\frac{34!}{22!}\cdot \frac{24!}{36!}=1-\frac{24\cdot23}{36\cdot35}=1-\frac{46}{105}=\frac{59}{105}\approx 0.56
\end{equation}
So, the likelihood our partner has what we are looking for if either or both of the two cards will give what we need is $56\%$.\\
\indent Let's say you have a couple options for making decent meld, and any of three cards would suffice. Lets say you have $AKKQJ\clubsuit$. By Equation 1 you know there is a $56\%$ chance your partner has one or both $10\clubsuit$ for the run, and a $33\%$ chance they can fill you in for the double marriage. You configuration of the three cards makes bidding worthwhile, so you use a similar logic as in equation 1. The calculation for the likelihood our partner has the card we are looking for follows:
\begin{equation}
 1-\frac{\frac{33!}{21!}}{\frac{36!}{24!}}=1-\frac{33!}{21!}\cdot \frac{24!}{36!}=1-\frac{24\cdot 23\cdot 22}{36\cdot 35\cdot 34}=1-\frac{506}{1785}=\frac{1279}{1785}\approx 0.72
\end{equation}
So, if any of the three cards is enough for you to bid on, there is a $72\%$ chance your partner has one or more of the cards you need.\\
\indent We can generalize this calculation by letting $n$ be the number of cards we could recieve that would make our hand worth bidding on:
\begin{equation}
1-\frac{(36-n)!}{(24-n)!}\cdot \frac{24!}{36!}
\end{equation}
The odds calculated in this document are the odds one's partner has the specific card(s) one has in mind. There are other unforeseen possible passes that help a bidder make meld and take tricks, so the odds of a receiving a pass that can still make for a successful hand will be somewhat higher than the odds calculated by Equation 3.\\
\begin{center}
  \textbf{Checking Our Work}
\end{center}
Lets simulate some card hands and see if our calculations are correct.
We will use the R language to run our simulation.
\begin{lstlisting}[language=R]
set.seed(1)
draw <- function(){
    deck <- c(1:24, 1:24)
    deck <- sample(deck,48)
    list(deck[1:12],
         deck[13:24],
         deck[25:36],
         deck[37:48])
}
findCard <- function(hand){
    (1:24)[!1:24 %in% hand][1]
}
check <- function(hand, card){
    any(hand %in% card)
}
game <- function(x){
    hands <- draw()
    card  <- findCard(hands[[1]])
    check(hands[[2]], card)
}
runs <- sapply(1:10000, game)
sum(runs)/length(runs)
## [1] 0.5642
\end{lstlisting}
So we can see that when we simulate 10,000 hands where the player is looking for one card that they do not have, their partner had it 56.42 percent of the time.\\
\\
\textbf{Flip a coin folks!}

\begin{center}
  Bidding for a Playing Hand
\end{center}
\indent
Another consideration when bidding is the strength of one's playing hand including the number of losers the bidder would like to be pass away to their partner. This next section considers the likelihood of ridding one's hand of 0,1,2,3 or 4 losers. We will approach this question by considering the number of winners your partner is likely to be able to pass you. We will consider 18 cards to be winners, the 12 trump cards and 6 non-trump Aces. (The following does not consider the possibility of turning cards into winners, such as having A-A-10 in a non-trump suit.)
\indent  1. Probability your partner can only send you losers. Let $n=$ the number of winners in the bidder's hand. There are $18-n$ winners in the 36 cards not in the bidder's hand. For the bidder's partner to have no winners they will have to pick up 12 losers in a row. The chances are
\begin{equation}
  \frac{36-(18-n)}{36} \cdot \frac{35-(18-n)}{35}\cdot \frac{34-(18-n)}{34}\cdot ...\cdot \frac{25-(18-n)}{25}
\end{equation}
More concisely, we may say the likelihood of the partner having no winners to pass is:
\begin{equation}
 P(0\text{ winners})= \frac{(18+n)!}{(6+n)!}\cdot \frac{24!}{36!}
\end{equation}
\indent 2. Probability your partner can only pass one winner. Let's assume the winner is the first card drawn, then we will multiply by 12 to account for the other possible positions of the one winner.
\begin{equation}
\frac{18-n}{36}\cdot \frac{18+n}{35}\cdot \frac {17+n}{34}\cdot ...\cdot \frac{8+n}{25} \cdot 12
\end {equation}
And so the probability is:
\begin{equation}
 P(1 \text{ winner})= 12\cdot (18-n)\cdot \frac{(18+n)!}{(7+n)!}\cdot \frac{24!}{36!}
\end{equation}
\indent
3. Probability your partner has two winners to pass. Let's assume the two winners are the first two cards drawn, followed by 10 losers:\\
\begin {center}
\underline{W} \underline{W} \underline{L} \underline{L} \underline{L} \underline{L} \underline{L} \underline{L} \underline{L} \underline{L} \underline{L} \underline{L}
\end {center}
\begin {equation}
\frac{18-n}{36}\cdot \frac{17-n}{35}\cdot \frac{18+n}{34} \cdot \frac{17+n}{33}\cdot ...\cdot \frac {9+n}{25}=\frac{(18-n)!}{(16-n)!}\cdot \frac{(18+n)!24!}{(8+n)!36!}
\end{equation}
Notice that, given the first card is a winner there are 11 possible locations for the second winner:
\begin {center}
  \underline{W} \underline{L} \underline{W} \underline{L} \underline{L} \underline{L} \underline{L} \underline{L} \underline{L} \underline{L} \underline{L} \underline{L}\\
  \underline{W} \underline{L} \underline{L} \underline{W} \underline{L} \underline{L} \underline{L} \underline{L} \underline{L} \underline{L} \underline{L} \underline{L}\\
  \underline{W} \underline{L} \underline{L} \underline{L} \underline{W} \underline{L} \underline{L} \underline{L} \underline{L} \underline{L} \underline{L} \underline{L}\\
 $\vdots$ \\
   \underline{W} \underline{L} \underline{L} \underline{L} \underline{L} \underline{L} \underline{L} \underline{L} \underline{L} \underline{L} \underline{L} \underline{W}\\
\end {center}
Then, if first winner doesn't appear until the second card, there are 10 possible locations for the second winner. 

\begin {center}
  \underline{L} \underline{W} \underline{W} \underline{L} \underline{L} \underline{L} \underline{L} \underline{L} \underline{L} \underline{L} \underline{L} \underline{L}\\
\underline{L} \underline{W} \underline{L} \underline{W} \underline{L} \underline{L} \underline{L} \underline{L} \underline{L} \underline{L} \underline{L} \underline{L}\\
$\vdots$
  \end{center}
IF the first winner doesnt appear until the second card, there are 9 possible locations.
\begin {center}
  \underline{L} \underline{L} \underline{W} \underline{W} \underline{L} \underline{L} \underline{L} \underline{L} \underline{L} \underline{L} \underline{L} \underline{L}\\
\underline{L} \underline{L} \underline{W} \underline{L} \underline{W} \underline{L} \underline{L} \underline{L} \underline{L} \underline{L} \underline{L} \underline{L}\\
$\vdots$
  \end{center}
As the first winner progresses, the possible locations dwindle until there is only 1 possible location for the second winner:
\begin {center}
  \underline{L} \underline{L} \underline{L} \underline{L} \underline{L} \underline{L} \underline{L} \underline{L} \underline{L} \underline{L} \underline{W} \underline{W}\\
  \end{center}
We represent combination of all these possibilities by:
\begin{equation}
P(2\text{ winners})= \left( \displaystyle\sum_{m=1}^{11} m \right) \cdot \frac{(18-n)!}{(16-n)!}\cdot \frac{(18+n)!24!}{(8+n)!36!} \text{ or } 66 \cdot \frac{(18-n)!}{(16-n)!}\cdot \frac{(18+n)!24!}{(8+n)!36!}
\end{equation}
\indent 4.The probability your partner has 3 winners. Let's begin by finding the probability for a particular case, then we will figure the number of possible cases. Probability for 3 winners followed by 9 losers:
\begin {center}
  \underline{W} \underline{W} \underline{W} \underline{L} \underline{L} \underline{L} \underline{L} \underline{L} \underline{L} \underline{L} \underline{L} \underline{L}\\
  \end{center}
\begin {equation} 
\frac{18-n}{36}\cdot \frac{17-n}{35}\cdot \frac{16-n}{34} \cdot \frac{18+n}{33}\cdot \frac{17+n}{32}...\cdot \frac {10+n}{25}=\frac{(18-n)!}{(15-n)!}\cdot \frac{(18+n)!24!}{(9+n)!36!}
\end{equation}
The real challenge with this one is calculating the number of combinations of 3 winners and 9 losers. Let's consider the first 2 winners fixed and the note there are 10 possible placements of the third winner. Then if the second winner is bumped down one as in
\begin {center}
  \underline{W} \underline{L} \underline{W} \underline{W} \underline{L} \underline{L} \underline{L} \underline{L} \underline{L} \underline{L} \underline{L} \underline{L}\\
  \end{center}
There are 9 locations for the third winner. Bumping the second winner down again gives 8 locations for the third winner, and the trend continues until there is only one location available for the final winner. 
\begin {center}
  \underline{W} \underline{L} \underline{L} \underline{L} \underline{L} \underline{L} \underline{L} \underline{L} \underline{L} \underline{L} \underline{W} \underline{W}\\
  \end{center}
We may conclude the number of possible combinations with the first winner in the first position is $ \displaystyle\sum_{m=1}^{10} m $. The same logic can be used as the first winner proceeds to the next position,
\begin {center}
  \underline{L} \underline{W} \underline{W} \underline{W} \underline{L} \underline{L} \underline{L} \underline{L} \underline{L} \underline{L} \underline{L} \underline{L}\\
  \end{center}
resulting in $ \displaystyle\sum_{m=1}^{9} m $ combinations. The pattern continues until we arrive at a sum of sums:
\begin{equation}
  \displaystyle\sum_{m=1}^{10} m +\displaystyle\sum_{m=1}^{9} m +\displaystyle\sum_{m=1}^{8} m +\displaystyle\sum_{m=1}^{7} m +\displaystyle\sum_{m=1}^{6} m +\displaystyle\sum_{m=1}^{5} m +\displaystyle\sum_{m=1}^{4} m +\displaystyle\sum_{m=1}^{3} m +\displaystyle\sum_{m=1}^{2} m +\displaystyle\sum_{m=1}^{1} m= 220
\end{equation}
We multiply the 220 combinations by the likelihood of any particular pattern of 3 winners and 9 losers to get our overall probability.
\begin {equation} 
P(3 \text{ winners})=220\cdot \frac{(18-n)!}{(15-n)!}\cdot \frac{(18+n)!24!}{(9+n)!36!}
\end{equation}
\indent 5. Finally we consider the possibility your partner has 4 or more winners, and so able to give a loser free pass. This means they don't have just 0, 1, 2 or 3 winners, so we can subtract the previously determined probabilities from 1 to get:
\begin {equation}
  \begin{aligned}
    P(4 \text{+ winners})=1&-\frac{(18+n)!}{(6+n)!}\cdot \frac{24!}{36!} -12\cdot (18-n)\cdot \frac{(18+n)!}{(7+n)!}\cdot \frac{24!}{36!}\\
    & -66 \cdot \frac{(18-n)!}{(16-n)!}\cdot \frac{(18+n)!24!}{(8+n)!36!}  - 220\cdot \frac{(18-n)!}{(15-n)!}\cdot \frac{(18+n)!24!}{(9+n)!36!}
\end{aligned}
\end{equation}
6. Let's run some numbers on some common scenarios. 

\end{document}

